name: Download Foghorn Font

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: macos-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3  # Mettre à jour vers v3

    - name: Verify file path
      run: |
        # Lister les fichiers dans le répertoire pour vérifier la présence de Foghorn.ttf
        ls -R /Library/Developer/CoreSimulator/Volumes/watchOS_21R355/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS\ 10.0.simruntime/Contents/Resources/RuntimeRoot/System/Library/NanoTimeKit/FaceBundles/

    - name: Download watchOS SDK
      run: |
        # Crée un dossier temporaire pour télécharger le SDK
        mkdir -p ~/watchos-sdk
        cd ~/watchos-sdk

        # Chemin vers Foghorn.ttf
        FONT_PATH="/Library/Developer/CoreSimulator/Volumes/watchOS_21R355/Library/Developer/CoreSimulator/Profiles/Runtimes/watchOS 10.0.simruntime/Contents/Resources/RuntimeRoot/System/Library/NanoTimeKit/FaceBundles/NTKFoghornFaceBundle.bundle/Foghorn.ttf"
        
        if [ -f "$FONT_PATH" ]; then
          echo "Police Foghorn trouvée ! Copie du fichier..."
          cp "$FONT_PATH" $GITHUB_WORKSPACE/Foghorn.ttf
        else
          echo "Fichier non trouvé, vérifiez le chemin ou le SDK."
        fi

    - name: Upload font to repository
      uses: actions/upload-artifact@v3  # Compatible Node.js
      with:
        name: Foghorn.ttf
        path: Foghorn.ttf
